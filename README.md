# 共有スケジュールアプリケーション

スケジュールを安全に共有するための招待制スケジュール管理アプリケーション

## 概要

本アプリケーションは、個人のスケジュールを特定のユーザーと安全に共有できるスケジュール管理システムです。共有コードによる招待制を採用し、承認フローを経てスケジュールの共有関係を構築します。

## アーキテクチャ

- **フロントエンド**: Next.js (TypeScript)
- **バックエンド**: NestJS (TypeScript)
- **データベース**: PostgreSQL
- **認証**: Auth0
- **インフラ**: Docker Compose (開発環境), AWS (本番環境)

## 開発進捗

### 実装状況サマリー

- [ ] 共有コード発行機能
- [ ] 承認機能
- [ ] 通知機能
- [ ] スケジュール管理機能
  - [ ] スケジュール登録
  - [ ] スケジュール表示
- [ ] ユーザー管理機能
- [ ] 認証機能
  - [ ] ソーシャルログイン拡充
- [ ] タブ管理機能（検討中）

> **💡 チェックマークの使い方**  
> 機能が完了したら、該当箇所を以下のようにコピペで更新してください：
> 
> **コピペ用サンプル:**
> - 未完了: `- [ ] 機能名`
> - 完了: `- [✅] 機能名` 

---

## 機能一覧

### 1. 共有コード発行機能 `[ ]`

ユーザー間でスケジュールを共有するための一時的な招待コードを発行する機能です。

#### 仕様

- **有効期限**: 1〜15分（ユーザーが選択可能）
- **形式**: UUID v4
- **発行制限**: 同時に複数のコードを発行できない（新規発行時に過去のコードは自動失効）
- **セキュリティ**: 一度限りの使用、期限切れ自動無効化

#### ユースケース

1. ユーザーが共有したい相手のために共有コードを発行
2. 有効期限（1〜15分）を選択
3. 生成されたUUID v4形式のコードを相手に共有
4. 新しいコードを発行すると、以前のコードは自動的に失効

---

### 2. 承認機能 `[ ]`

共有コードを使用した共有リクエストに対する承認・不承認を管理する機能です。

#### 仕様

- **通知方法**: プッシュ通知
- **承認フロー**: アプリ内で承認/不承認を選択
- **データ設計**: イミュータブル設計（更新不可、削除のみ可能）
- **実装方針**: イベントソーシングパターンの検討

#### ユースケース

1. ユーザーが共有コードを入力
2. コード発行者にプッシュ通知が送信される
3. 発行者がアプリ内で承認/不承認を選択
4. 承認された場合、双方のスケジュールが共有される

#### 技術的考慮事項

- 承認履歴の追跡可能性
- イベントソーシングによる状態管理
- 承認ステータスの不変性保証

---

### 3. 通知機能 `[ ]`

アプリ内のイベントをユーザーに通知する機能です。

#### 仕様

- **通知一覧**: 受信した通知を時系列で表示
- **通知種別**:
  - お知らせ（一般的な情報）
  - 承認リクエスト（共有の承認が必要）
  - システム通知
- **UI**: 通知アイコンでの未読数表示

#### 通知トリガー

- 共有リクエストの受信
- 承認/不承認の結果
- スケジュールの更新（共有相手のスケジュール変更時）
- システムメンテナンス情報

---

### 4. スケジュール管理機能 `[ ]`

#### 4.1 スケジュール登録 `[ ]`

スケジュールの作成・編集を行う機能です。

##### 基本情報

- **スケジュール名**: イベントの名称
- **詳細**: スケジュールの説明・メモ
- **日付・期間**: 開始日時、終了日時
- **位置情報**: スケジュールに紐づく場所（オプション）

##### 高度な機能

- **未来公開機能**: 
  - スケジュール日より前に公開日を設定可能
  - 公開日まで共有相手には非表示
  
- **選択的共有**:
  - 共有関係にあるすべてのユーザーではなく、特定のユーザーのみに共有可能
  - スケジュールごとに共有範囲を細かく設定

#### 4.2 スケジュール表示 `[ ]`

ログイン後のホーム画面でスケジュールを確認する機能です。

##### 表示形式

- **カレンダービュー**: 月次・週次・日次の切り替え可能
- **表示内容**:
  - 自分が登録したスケジュール
  - 共有関係にあるユーザーのスケジュール（公開されているもの）
  
##### UI/UX

- カラーコーディング（ユーザーごとに色分け）
- スケジュールの詳細表示（クリック時）
- フィルタリング機能（ユーザー別、カテゴリ別）

---

### 5. ユーザー管理機能 `[ ]`

#### プロフィール表示 `[ ]`

- **アクセス方法**: 画面隅のユーザーアイコンをクリック
- **表示内容**:
  - ユーザー情報（名前、メールアドレス、プロフィール画像）
  - ※更新機能は提供しない（Auth0で管理）

#### 共有関係管理 `[ ]`

- **共有ユーザー一覧**: 現在スケジュールを共有しているユーザーの表示
- **共有解除**: 特定のユーザーとの共有関係を解除可能
- **共有履歴**: 過去の共有関係の履歴表示

---

### 6. 認証機能 `[ ]`

#### ログイン `[ ]`

- **Auth0統合**: ソーシャルログインによる認証
- **対応プロバイダ**:
  - Google（現在実装済み）
  - その他のソーシャルログインプロバイダ（拡充予定）

#### ログアウト `[ ]`

- Auth0セッションの完全なクリア
- アプリケーション内のトークン削除

---

## 検討中の機能

### タブ管理機能 `[ ]`

スケジュールをコンテキストごとに分離して管理する機能です。

#### コンセプト

ユーザーの生活の異なる領域（家族、会社、友人など）でスケジュールのスコープを分離し、プライバシーと利便性を両立させます。

#### 想定される実装

- **タブの種類**:
  - 家族用
  - 会社用
  - 友人用
  - プライベート
  - カスタムタブ
  
- **データ分離**:
  - タブごとに独立したスケジュールデータ
  - タブごとに異なる共有関係
  - タブ間でのデータ移動機能

#### 技術的課題

- データモデルの設計
- パフォーマンスへの影響
- UI/UXの複雑性管理

---

## プロジェクト構成

```
```

## 開発環境のセットアップ

### 必要な環境

- Docker & Docker Compose

### 起動手順

```bash

```

## セキュリティ考慮事項

- 共有コードの短い有効期限による不正利用防止
- Auth0による認証・認可
- イミュータブルデザインによる監査証跡の保持
- プッシュ通知による即座の承認フロー

## データ設計の原則

- **イベントソーシング**: 承認履歴など、変更の履歴が重要なデータに適用
- **イミュータブル設計**: 更新ではなく新規追加により状態を管理
- **関係性の明示**: ユーザー間の共有関係を明確にモデリング

## ライセンス

(ライセンス情報を記載)

## コントリビューション

(コントリビューションガイドラインを記載)
